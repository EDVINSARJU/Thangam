{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>WELCOME TO THANGAM JEWELS </title>
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <meta content="eCommerce HTML Template Free Download" name="keywords">
    <meta content="eCommerce HTML Template Free Download" name="description">

    <!-- Favicon -->
    <link href="{% static 'img/favicon.ico' %}" rel="icon">

    <!-- Google Fonts -->
    <link href="{% static 'https://fonts.googleapis.com/css?family=Open+Sans:300,400|Source+Code+Pro:700,900&display=swap' %}" rel="stylesheet">

    <!-- CSS Libraries -->
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.0/css/all.min.css" rel="stylesheet">
    <link href="{% static 'lib/slick/slick.css' %}" rel="stylesheet">
    <link href="{% static 'lib/slick/slick-theme.css' %}" rel="stylesheet">

    <!-- Template Stylesheet -->
    <link href="{% static 'css/style.css' %}" rel="stylesheet">

    <style>

        .left-corner-heading {
            position: absolute;
            left: ; /* Align it to the left side of its container */
            top: 0; /* Align it to the top of its container */
        }

        .delete-button {
            background-color: #ff0000; /* Red color */
            color: #fff; /* Text color */
            border: none;
            padding: 5px 10px;
            border-radius: 5px;
            cursor: pointer;
        }

        .delete-button:hover {
            background-color: #cc0000; /* Darker red color on hover */
        }

        /* Add this style for the Logout button container */
        .logout-button-container {
            position: absolute;
            top: 0; /* Align it to the top of the header */
            right: 20px; /* Align it to the right side of the header with 20px spacing */
            color: #ccc;
        }

        /* Style for the Logout button */
        .logout-button-container a {
            color: #666; /* Button text color */
            text-decoration: none;
            padding: 8px 16px; /* Adjust the padding for button size */
            border-radius: 4px;
        }

        .save-changes-button {
            background-color: #28a745; /* Green color */
            color: #fff; /* Text color */
            border: none;
            padding: 5px 10px;
            border-radius: 5px;
            cursor: pointer;
            margin-right: 5px; /* Adjust the margin for spacing */
        }

        .save-changes-button:hover {
            background-color: #218838; /* Darker green color on hover */
        }

        /* Style for the "Edit" link */
        .edit-link {
            color: #007bff; /* Blue color */
            text-decoration: none;
            margin-right: 5px; /* Adjust the margin for spacing */
        }

        .edit-link:hover {
            text-decoration: underline; /* Underline the link on hover */
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 20px;
        }

        th {
            padding: 10px;
            text-align: left;
        }

        /* Apply styles to the table cells */
        td {
            padding: 10px;
            text-align: left;
        }

        th:nth-child(1),
        td:nth-child(1) {
            width: 5%;
        }

        th:nth-child(2),
        td:nth-child(2) {
            width: 15%;
        }

        th:nth-child(3),
        td:nth-child(3) {
            width: 10%;
        }

        th, td {
            border: 1px solid #dddddd;
            text-align: left;
            padding: 8px;
        }

        th {
            background-color: #f2f2f2;
        }

        img {
            max-width: 100px;
            max-height: 100px;
        }

        .delete-button, .edit-button {
            padding: 5px 10px;
            background-color: #ff0000;
            color: #fff;
            text-decoration: none;
            border: none;
            cursor: pointer;
            font-size: 14px;
        }

        .delete-button:hover, .edit-button:hover {
            background-color: #cc0000;
        }

        /* Add this CSS for the sidebar */
        .sidebar {
            width: 20%;
            background-color: #f0f0f0;
            padding: 20px;
            position: fixed;
            height: 100%;
            overflow: auto;
        }

        .sidebar-item {
            margin-bottom: 20px;
            padding: 10px;
            background-color: #ccc;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }

        .sidebar-item:hover {
            background-color: #ddd;
        }

        .account-settings {
            background-color: #f9f9f9;
            border: 1px solid #ddd;
            padding: 20px;
        }

        .account-box {
            background-color: #fff;
            border: 1px solid #ddd;
            padding: 10px;
            margin-top: 10px;
        }

        .content {
            margin-left: 20%; /* Adjust margin to accommodate sidebar */
            padding: 20px;
            padding-left: 40px; /* Additional padding for content */
        }
        
        /* Style for the canvas element */
        canvas#productChart {
            max-width: 800px; /* Set the maximum width */
            max-height: 400px; /* Set the maximum height */
            margin: 20px auto; /* Center the canvas horizontally and add margin */
            display: block; /* Ensure the canvas is displayed as a block element */
            overflow-x: auto; /* Add horizontal scroll if needed */
        }
        
        /* Adjust the font size for the product labels */
        #productChart .chartjs-render-monitor .chartjs-tooltip .label {
            font-size: 12px; /* Change the font size as needed */
        }
        
            
    </style>
</head>
    
        </div>
        <div class="nav">
            <div class="container-fluid">
                <nav class="navbar navbar-expand-md bg-dark navbar-dark">
                    <a href="#" class="navbar-brand"></a>
                    <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbarCollapse">
                        <span class="navbar-toggler-icon"></span>
                    </button>        
    
                    <div class="collapse navbar-collapse justify-content-between" id="navbarCollapse">
                        <div class="navbar-nav ml-auto"> 
                            <a href="" class="nav-item nav-link" style="color: white;"></a>
                           
                            </div>
                        </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </nav>
            </div>
            
<body class="sub_page">
    <div class="hero_area">
        <header class="header_section">
            <!-- Your header content goes here -->
            <div class="logout-button-container">
                <a href="{% url 'logout' %}" class="btn btn-primary">Logout</a>
            </div>
        </header>
    </div>
    </section>
    <div class="sidebar">
        <div class="sidebar-item">
            <!-- Feedback link -->
            <div class="account-box">
                <a href="{% url 'feedback_list' %}" class="content-item">FEEDBACK</a>
            </div>
        </div>
        <div class="sidebar-item">
            <!-- Purity of gold link -->
            <div class="account-box">
                <a href="{% url 'calculate_purity' %}" class="content-item">PURITY OF GOLD</a>
            </div>
        </div>
        <div class="sidebar-item">
            <!-- Product links -->
            PRODUCT
            <div class="account-box">
                <div class="content-item" onclick="loadAddProductForm()">ADD PRODUCT</div>
            </div>
            <div class="account-box">
                <a class="content-item" href="{% url 'viewproduct' %}">VIEW PRODUCT</a>
            </div>
        </div>
        <div class="sidebar-item">
            <!-- User listings -->
            USERS LISTING
            <div class="account-box">
                <a class="content-item" href="{% url 'staff_list' %}">STAFF</a>
            </div>
            <div class="account-box">
                <a class="content-item" href="{% url 'customer_list' %}">CUSTOMERS</a>
            </div>
        </div>
    </div>

    <div class="content">
        <h1>Gold Item List</h1>
        <table>
            <thead>
                <tr>
                    <th>Product Name</th>
                    <th>Weight</th>
                    <th>Volume</th>
                    <th>Calculated Purity (%)</th>
                    <th>Product Image</th>
                    <th>Action</th>
                </tr>
            </thead>
            <tbody>
                {% for gold_item in gold_items %}
                <tr>
                    <td>{{ gold_item.product.product_name }}</td>
                    <td>{{ gold_item.weight }}</td>
                    <td>{{ gold_item.volume }}</td>
                    <td>{{ gold_item.product.predicted_purity_percentage }}</td>
                    {% if gold_item.product.product_image %}
                    <td><img src="{{ gold_item.product.product_image.url }}" alt="Product Image" class="product-image"></td>
                    {% else %}
                    <td>No Image Available</td>
                    {% endif %}
                    <td><a href="{% url 'generate_pdf' gold_item.id %}" class="btn btn-primary">Download PDF</a></td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
<head>

  








    
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Product Data Graph</title>
    <!-- Include Chart.js library -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <canvas id="productChart" width="800" height="400"></canvas>

    <script>
        // Fetch data from the product_data_endpoint_view
        fetch('/product_data_endpoint/')
            .then(response => response.json())
            .then(data => {
                // Extract labels and data from the fetched data
                const labels = data.labels;
                const weightData = data.data.weight;
                const volumeData = data.data.volume;
                const purityData = data.data.purity_of_gold;
                const estimatedPurityData = data.data.predicted_purity_percentage;


                
                // Create a Chart.js chart
                const ctx = document.getElementById('productChart').getContext('2d');
                const productChart = new Chart(ctx, {
                    type: 'bar',
                    data: {
                        labels: labels,
                        datasets: [{
                            label: 'Weight (grams)',
                            data: weightData,
                            backgroundColor: 'rgba(255, 99, 132, 0.5)'
                        }, {
                            label: 'Volume',
                            data: volumeData,
                            backgroundColor: 'rgba(54, 162, 235, 0.5)'
                        },
                           
                        {
                            label: 'predicted_purity_percentage (%)',
                            data: estimatedPurityData,
                            backgroundColor: 'rgba(75, 192, 192, 0.5)'
                        }]
                    },
                    options: {
                        scales: {
                            y: {
                                beginAtZero: true
                            }
                        },
                        plugins: {
                            legend: {
                                display: true,
                                position: 'top', // Display legend at the top
                                labels: {
                                    // Adjust font size and padding for legend labels
                                    fontSize: 14,
                                    padding: 20
                                }
                            },
                            datalabels: { // Plugin for formatting labels
                                anchor: 'end',
                                align: 'end',
                                formatter: function(value) {
                                    // Split the label into multiple lines
                                    return value.split('\n');
                                }
                            }
                        }
                    }
                });
            })
            .catch(error => console.error('Error fetching data:', error));
    </script>
</body>
</html>
